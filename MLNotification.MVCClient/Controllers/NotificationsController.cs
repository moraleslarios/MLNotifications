using MLNotification.Domain;
using MLNotification.ServiceClientConnect;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using System.Web;
using System.Web.Mvc;

namespace MLNotification.MVCClient.Controllers
{
    public class NotificationsController : Controller
    {
        // GET: Notifications
        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(int i = 0)
        {
            return View();
        }


        public  ActionResult Index2()
        {
            MLMessageHubConect connectHub = null;
            connectHub = BuilderMLMessageHubConnect.CreateMLMessageHub("http://localhost:11111");
            var message = new NotificationMessage { Subject = "MVC Client", Body = "Message Send From MVC Client", User = "Edge", MessageDate = DateTime.Now, Server = "localhost", UriImage = "data:image/jpeg;base64,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" };
            //message.MessageType = (MessageType)cmbType.SelectedIndex;
            connectHub.SendMessage2(message);
            connectHub.Dispose();

            return View();
        }
    }
}